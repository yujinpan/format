import{N as X,F as Mt}from"./file-19d2fede.js";function T(n){"@babel/helpers - typeof";return T=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},T(n)}function ve(n,t){if(T(n)!=="object"||n===null)return n;var e=n[Symbol.toPrimitive];if(e!==void 0){var i=e.call(n,t||"default");if(T(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(n)}function Ge(n){var t=ve(n,"string");return T(t)==="symbol"?t:String(t)}function Re(n,t,e){return t=Ge(t),t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function jt(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),e.push.apply(e,i)}return e}function we(n){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?jt(Object(e),!0).forEach(function(i){Re(n,i,e[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):jt(Object(e)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(e,i))})}return n}function nt(n,t){(t==null||t>n.length)&&(t=n.length);for(var e=0,i=new Array(t);e<t;e++)i[e]=n[e];return i}function Fe(n){if(Array.isArray(n))return nt(n)}function Oe(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function Se(n,t){if(n){if(typeof n=="string")return nt(n,t);var e=Object.prototype.toString.call(n).slice(8,-1);if(e==="Object"&&n.constructor&&(e=n.constructor.name),e==="Map"||e==="Set")return Array.from(n);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return nt(n,t)}}function Me(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function je(n){return Fe(n)||Oe(n)||Se(n)||Me()}/*!
 * operation-tree-node v1.1.1
 * (c) 2019-2023 yujinpan
 * Released under the MIT License.
 */function Ne(n,t){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,r=e.children||"children";return function s(o,l){var a=[];return i?o.forEach(function(h,u,c){if(t(h,u,c,l)){var g=Nt(h),f=h[r];if(X(f)){var d=s(f,g);X(d)?g[r]=d:delete g[r]}a.push(g)}}):o.forEach(function(h,u,c){var g=!1,f=Nt(h),d=h[r];if(X(d)){var y=s(d,f);(g=X(y))?f[r]=y:delete f[r]}(t(h,u,c,l)||g)&&a.push(f)}),a}(n)}function Nt(n){return n instanceof Object?we({},n):Array.isArray(n)?je(n):n}class Ae{constructor(t){this.propagationStopped,this.defaultPrevented,this.type=t,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}const Vt=Ae,Te={PROPERTYCHANGE:"propertychange"};class be{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}const Ie=be;function Le(n,t,e){let i,r;e=e||Zt;let s=0,o=n.length,l=!1;for(;s<o;)i=s+(o-s>>1),r=+e(n[i],t),r<0?s=i+1:(o=i,l=!r);return l?s:~s}function Zt(n,t){return n>t?1:n<t?-1:0}function v(n,t){const e=Array.isArray(t)?t:[t],i=e.length;for(let r=0;r<i;r++)n[n.length]=e[r]}function Xe(n,t){const e=n.length;if(e!==t.length)return!1;for(let i=0;i<e;i++)if(n[i]!==t[i])return!1;return!0}function At(){}function Ye(n){let t=!1,e,i,r;return function(){const s=Array.prototype.slice.call(arguments);return(!t||this!==r||!Xe(s,i))&&(t=!0,r=this,i=s,e=n.apply(this,arguments)),e}}function qt(n){for(const t in n)delete n[t]}function zt(n){let t;for(t in n)return!1;return!t}class xe extends Ie{constructor(t){super(),this.eventTarget_=t,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(t,e){if(!t||!e)return;const i=this.listeners_||(this.listeners_={}),r=i[t]||(i[t]=[]);r.includes(e)||r.push(e)}dispatchEvent(t){const e=typeof t=="string",i=e?t:t.type,r=this.listeners_&&this.listeners_[i];if(!r)return;const s=e?new Vt(t):t;s.target||(s.target=this.eventTarget_||this);const o=this.dispatching_||(this.dispatching_={}),l=this.pendingRemovals_||(this.pendingRemovals_={});i in o||(o[i]=0,l[i]=0),++o[i];let a;for(let h=0,u=r.length;h<u;++h)if("handleEvent"in r[h]?a=r[h].handleEvent(s):a=r[h].call(this,s),a===!1||s.propagationStopped){a=!1;break}if(--o[i]===0){let h=l[i];for(delete l[i];h--;)this.removeEventListener(i,At);delete o[i]}return a}disposeInternal(){this.listeners_&&qt(this.listeners_)}getListeners(t){return this.listeners_&&this.listeners_[t]||void 0}hasListener(t){return this.listeners_?t?t in this.listeners_:Object.keys(this.listeners_).length>0:!1}removeEventListener(t,e){const i=this.listeners_&&this.listeners_[t];if(i){const r=i.indexOf(e);r!==-1&&(this.pendingRemovals_&&t in this.pendingRemovals_?(i[r]=At,++this.pendingRemovals_[t]):(i.splice(r,1),i.length===0&&delete this.listeners_[t]))}}}const $e=xe,at={CHANGE:"change",ERROR:"error",BLUR:"blur",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",FOCUS:"focus",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",RESIZE:"resize",TOUCHMOVE:"touchmove",WHEEL:"wheel"};function b(n,t,e,i,r){if(i&&i!==n&&(e=e.bind(i)),r){const o=e;e=function(){n.removeEventListener(t,e),o.apply(this,arguments)}}const s={target:n,type:t,listener:e};return n.addEventListener(t,e),s}function Tt(n,t,e,i){return b(n,t,e,i,!0)}function $(n){n&&n.target&&(n.target.removeEventListener(n.type,n.listener),qt(n))}class Z extends $e{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(at.CHANGE)}getRevision(){return this.revision_}onInternal(t,e){if(Array.isArray(t)){const i=t.length,r=new Array(i);for(let s=0;s<i;++s)r[s]=b(this,t[s],e);return r}return b(this,t,e)}onceInternal(t,e){let i;if(Array.isArray(t)){const r=t.length;i=new Array(r);for(let s=0;s<r;++s)i[s]=Tt(this,t[s],e)}else i=Tt(this,t,e);return e.ol_key=i,i}unInternal(t,e){const i=e.ol_key;if(i)De(i);else if(Array.isArray(t))for(let r=0,s=t.length;r<s;++r)this.removeEventListener(t[r],e);else this.removeEventListener(t,e)}}Z.prototype.on;Z.prototype.once;Z.prototype.un;function De(n){if(Array.isArray(n))for(let t=0,e=n.length;t<e;++t)$(n[t]);else $(n)}const Ue=Z;function m(){throw new Error("Unimplemented abstract method.")}let Je=0;function Ke(n){return n.ol_uid||(n.ol_uid=String(++Je))}class bt extends Vt{constructor(t,e,i){super(t),this.key=e,this.oldValue=i}}class We extends Ue{constructor(t){super(),this.on,this.once,this.un,Ke(this),this.values_=null,t!==void 0&&this.setProperties(t)}get(t){let e;return this.values_&&this.values_.hasOwnProperty(t)&&(e=this.values_[t]),e}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}getPropertiesInternal(){return this.values_}hasProperties(){return!!this.values_}notify(t,e){let i;i=`change:${t}`,this.hasListener(i)&&this.dispatchEvent(new bt(i,t,e)),i=Te.PROPERTYCHANGE,this.hasListener(i)&&this.dispatchEvent(new bt(i,t,e))}addChangeListener(t,e){this.addEventListener(`change:${t}`,e)}removeChangeListener(t,e){this.removeEventListener(`change:${t}`,e)}set(t,e,i){const r=this.values_||(this.values_={});if(i)r[t]=e;else{const s=r[t];r[t]=e,s!==e&&this.notify(t,s)}}setProperties(t,e){for(const i in t)this.set(i,t[i],e)}applyProperties(t){t.values_&&Object.assign(this.values_||(this.values_={}),t.values_)}unset(t,e){if(this.values_&&t in this.values_){const i=this.values_[t];delete this.values_[t],zt(this.values_)&&(this.values_=null),e||this.notify(t,i)}}}const Qt=We;function Be(n,t){if(!n)throw new Error(t)}class ht extends Qt{constructor(t){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),t)if(typeof t.getSimplifiedGeometry=="function"){const e=t;this.setGeometry(e)}else{const e=t;this.setProperties(e)}}clone(){const t=new ht(this.hasProperties()?this.getProperties():null);t.setGeometryName(this.getGeometryName());const e=this.getGeometry();e&&t.setGeometry(e.clone());const i=this.getStyle();return i&&t.setStyle(i),t}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&($(this.geometryChangeKey_),this.geometryChangeKey_=null);const t=this.getGeometry();t&&(this.geometryChangeKey_=b(t,at.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(t){this.set(this.geometryName_,t)}setStyle(t){this.style_=t,this.styleFunction_=t?He(t):void 0,this.changed()}setId(t){this.id_=t,this.changed()}setGeometryName(t){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=t,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}function He(n){if(typeof n=="function")return n;let t;return Array.isArray(n)?t=n:(Be(typeof n.getZIndex=="function","Expected an `ol/style/Style` or an array of `ol/style/Style.js`"),t=[n]),function(){return t}}const te=ht,ke={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};class Ve{constructor(t){this.code_=t.code,this.units_=t.units,this.extent_=t.extent!==void 0?t.extent:null,this.worldExtent_=t.worldExtent!==void 0?t.worldExtent:null,this.axisOrientation_=t.axisOrientation!==void 0?t.axisOrientation:"enu",this.global_=t.global!==void 0?t.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=t.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=t.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||ke[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(t){this.global_=t,this.canWrapX_=!!(t&&this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(t){this.defaultTileGrid_=t}setExtent(t){this.extent_=t,this.canWrapX_=!!(this.global_&&t)}setWorldExtent(t){this.worldExtent_=t}setGetPointResolution(t){this.getPointResolutionFunc_=t}getPointResolutionFunc(){return this.getPointResolutionFunc_}}const ee=Ve,L=6378137,j=Math.PI*L,Ze=[-j,-j,j,j],qe=[-180,-85,180,85],Y=L*Math.log(Math.tan(Math.PI/2));class S extends ee{constructor(t){super({code:t,units:"m",extent:Ze,global:!0,worldExtent:qe,getPointResolution:function(e,i){return e/Math.cosh(i[1]/L)}})}}const It=[new S("EPSG:3857"),new S("EPSG:102100"),new S("EPSG:102113"),new S("EPSG:900913"),new S("http://www.opengis.net/def/crs/EPSG/0/3857"),new S("http://www.opengis.net/gml/srs/epsg.xml#3857")];function ze(n,t,e){const i=n.length;e=e>1?e:2,t===void 0&&(e>2?t=n.slice():t=new Array(i));for(let r=0;r<i;r+=e){t[r]=j*n[r]/180;let s=L*Math.log(Math.tan(Math.PI*(+n[r+1]+90)/360));s>Y?s=Y:s<-Y&&(s=-Y),t[r+1]=s}return t}function Qe(n,t,e){const i=n.length;e=e>1?e:2,t===void 0&&(e>2?t=n.slice():t=new Array(i));for(let r=0;r<i;r+=e)t[r]=180*n[r]/j,t[r+1]=360*Math.atan(Math.exp(n[r+1]/L))/Math.PI-90;return t}const tn=6378137,Lt=[-180,-90,180,90],en=Math.PI*tn/180;class G extends ee{constructor(t,e){super({code:t,units:"degrees",extent:Lt,axisOrientation:e,global:!0,metersPerUnit:en,worldExtent:Lt})}}const Xt=[new G("CRS:84"),new G("EPSG:4326","neu"),new G("urn:ogc:def:crs:OGC:1.3:CRS84"),new G("urn:ogc:def:crs:OGC:2:84"),new G("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new G("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new G("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let it={};function nn(n){return it[n]||it[n.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function rn(n,t){it[n]=t}let N={};function D(n,t,e){const i=n.getCode(),r=t.getCode();i in N||(N[i]={}),N[i][r]=e}function sn(n,t){let e;return n in N&&t in N[n]&&(e=N[n][t]),e}const _={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function F(n,t,e){let i,r;return t<n[0]?i=n[0]-t:n[2]<t?i=t-n[2]:i=0,e<n[1]?r=n[1]-e:n[3]<e?r=e-n[3]:r=0,i*i+r*r}function on(n,t){return n[0]<=t[0]&&t[2]<=n[2]&&n[1]<=t[1]&&t[3]<=n[3]}function ne(n,t,e){return n[0]<=t&&t<=n[2]&&n[1]<=e&&e<=n[3]}function Yt(n,t){const e=n[0],i=n[1],r=n[2],s=n[3],o=t[0],l=t[1];let a=_.UNKNOWN;return o<e?a=a|_.LEFT:o>r&&(a=a|_.RIGHT),l<i?a=a|_.BELOW:l>s&&(a=a|_.ABOVE),a===_.UNKNOWN&&(a=_.INTERSECTING),a}function ut(){return[1/0,1/0,-1/0,-1/0]}function ie(n,t,e,i,r){return r?(r[0]=n,r[1]=t,r[2]=e,r[3]=i,r):[n,t,e,i]}function ct(n){return ie(1/0,1/0,-1/0,-1/0,n)}function ln(n,t){const e=n[0],i=n[1];return ie(e,i,e,i,t)}function re(n,t,e,i,r){const s=ct(r);return se(s,n,t,e,i)}function an(n,t){return t[0]<n[0]&&(n[0]=t[0]),t[2]>n[2]&&(n[2]=t[2]),t[1]<n[1]&&(n[1]=t[1]),t[3]>n[3]&&(n[3]=t[3]),n}function se(n,t,e,i,r){for(;e<i;e+=r)hn(n,t[e],t[e+1]);return n}function hn(n,t,e){n[0]=Math.min(n[0],t),n[1]=Math.min(n[1],e),n[2]=Math.max(n[2],t),n[3]=Math.max(n[3],e)}function un(n,t){let e;return e=t(cn(n)),e||(e=t(gn(n)),e)||(e=t(dn(n)),e)||(e=t(fn(n)),e)?e:!1}function cn(n){return[n[0],n[1]]}function gn(n){return[n[2],n[1]]}function gt(n){return[(n[0]+n[2])/2,(n[1]+n[3])/2]}function xt(n){return n[3]-n[1]}function fn(n){return[n[0],n[3]]}function dn(n){return[n[2],n[3]]}function yn(n,t){return n[0]<=t[2]&&n[2]>=t[0]&&n[1]<=t[3]&&n[3]>=t[1]}function mn(n,t){return t?(t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t):n}function pn(n,t,e){let i=!1;const r=Yt(n,t),s=Yt(n,e);if(r===_.INTERSECTING||s===_.INTERSECTING)i=!0;else{const o=n[0],l=n[1],a=n[2],h=n[3],u=t[0],c=t[1],g=e[0],f=e[1],d=(f-c)/(g-u);let y,p;s&_.ABOVE&&!(r&_.ABOVE)&&(y=g-(f-h)/d,i=y>=o&&y<=a),!i&&s&_.RIGHT&&!(r&_.RIGHT)&&(p=f-(g-a)*d,i=p>=l&&p<=h),!i&&s&_.BELOW&&!(r&_.BELOW)&&(y=g-(f-l)/d,i=y>=o&&y<=a),!i&&s&_.LEFT&&!(r&_.LEFT)&&(p=f-(g-o)*d,i=p>=l&&p<=h)}return i}function _n(n,t,e,i,r,s){const o=r-e,l=s-i;if(o!==0||l!==0){const a=((n-e)*o+(t-i)*l)/(o*o+l*l);a>1?(e=r,i=s):a>0&&(e+=o*a,i+=l*a)}return w(n,t,e,i)}function w(n,t,e,i){const r=e-n,s=i-t;return r*r+s*s}function ft(n,t,e){return n+e*(t-n)}function dt(n,t){if(t!==void 0){for(let e=0,i=n.length;e<i;++e)t[e]=n[e];t=t}else t=n.slice();return t}function Cn(n,t){if(t!==void 0&&n!==t){for(let e=0,i=n.length;e<i;++e)t[e]=n[e];n=t}return n}function En(n){rn(n.getCode(),n),D(n,n,dt)}function Pn(n){n.forEach(En)}function E(n){return typeof n=="string"?nn(n):n||null}function $t(n){Pn(n),n.forEach(function(t){n.forEach(function(e){t!==e&&D(t,e,dt)})})}function vn(n,t,e,i){n.forEach(function(r){t.forEach(function(s){D(r,s,e),D(s,r,i)})})}function Gn(n,t){if(n===t)return!0;const e=n.getUnits()===t.getUnits();return(n.getCode()===t.getCode()||oe(n,t)===dt)&&e}function oe(n,t){const e=n.getCode(),i=t.getCode();let r=sn(e,i);return r||(r=Cn),r}function Dt(n,t){const e=E(n),i=E(t);return oe(e,i)}function Rn(){$t(It),$t(Xt),vn(Xt,It,ze,Qe)}Rn();class wn{constructor(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.supportedMediaTypes=null}getReadOptions(t,e){if(e){let i=e.dataProjection?E(e.dataProjection):this.readProjection(t);e.extent&&i&&i.getUnits()==="tile-pixels"&&(i=E(i),i.setWorldExtent(e.extent)),e={dataProjection:i,featureProjection:e.featureProjection}}return this.adaptOptions(e)}adaptOptions(t){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection},t)}getType(){return m()}readFeature(t,e){return m()}readFeatures(t,e){return m()}readGeometry(t,e){return m()}readProjection(t){return m()}writeFeature(t,e){return m()}writeFeatures(t,e){return m()}writeGeometry(t,e){return m()}}function yt(n,t,e){const i=e?E(e.featureProjection):null,r=e?E(e.dataProjection):null;let s;if(i&&r&&!Gn(i,r)?s=(t?n.clone():n).transform(t?i:r,t?r:i):s=n,t&&e&&e.decimals!==void 0){const o=Math.pow(10,e.decimals),l=function(a){for(let h=0,u=a.length;h<u;++h)a[h]=Math.round(a[h]*o)/o;return a};s===n&&(s=n.clone()),s.applyTransform(l)}return s}class Fn extends wn{constructor(){super()}getType(){return"json"}readFeature(t,e){return this.readFeatureFromObject(x(t),this.getReadOptions(t,e))}readFeatures(t,e){return this.readFeaturesFromObject(x(t),this.getReadOptions(t,e))}readFeatureFromObject(t,e){return m()}readFeaturesFromObject(t,e){return m()}readGeometry(t,e){return this.readGeometryFromObject(x(t),this.getReadOptions(t,e))}readGeometryFromObject(t,e){return m()}readProjection(t){return this.readProjectionFromObject(x(t))}readProjectionFromObject(t){return m()}writeFeature(t,e){return JSON.stringify(this.writeFeatureObject(t,e))}writeFeatureObject(t,e){return m()}writeFeatures(t,e){return JSON.stringify(this.writeFeaturesObject(t,e))}writeFeaturesObject(t,e){return m()}writeGeometry(t,e){return JSON.stringify(this.writeGeometryObject(t,e))}writeGeometryObject(t,e){return m()}}function x(n){if(typeof n=="string"){const t=JSON.parse(n);return t||null}return n!==null?n:null}const le=Fn;new Array(6);function On(){return[1,0,0,1,0,0]}function Sn(n,t,e,i,r,s,o,l){const a=Math.sin(s),h=Math.cos(s);return n[0]=i*h,n[1]=r*a,n[2]=-i*a,n[3]=r*h,n[4]=o*i*h-l*i*a+t,n[5]=o*r*a+l*r*h+e,n}function Mn(n,t,e,i,r,s){s=s||[];let o=0;for(let l=t;l<e;l+=i){const a=n[l],h=n[l+1];s[o++]=r[0]*a+r[2]*h+r[4],s[o++]=r[1]*a+r[3]*h+r[5]}return s&&s.length!=o&&(s.length=o),s}function jn(n,t,e,i,r,s,o){o=o||[];const l=Math.cos(r),a=Math.sin(r),h=s[0],u=s[1];let c=0;for(let g=t;g<e;g+=i){const f=n[g]-h,d=n[g+1]-u;o[c++]=h+f*l-d*a,o[c++]=u+f*a+d*l;for(let y=g+2;y<g+i;++y)o[c++]=n[y]}return o&&o.length!=c&&(o.length=c),o}function Nn(n,t,e,i,r,s,o,l){l=l||[];const a=o[0],h=o[1];let u=0;for(let c=t;c<e;c+=i){const g=n[c]-a,f=n[c+1]-h;l[u++]=a+r*g,l[u++]=h+s*f;for(let d=c+2;d<c+i;++d)l[u++]=n[d]}return l&&l.length!=u&&(l.length=u),l}function An(n,t,e,i,r,s,o){o=o||[];let l=0;for(let a=t;a<e;a+=i){o[l++]=n[a]+r,o[l++]=n[a+1]+s;for(let h=a+2;h<a+i;++h)o[l++]=n[h]}return o&&o.length!=l&&(o.length=l),o}const Ut=On();class Tn extends Qt{constructor(){super(),this.extent_=ut(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=Ye(function(t,e,i){if(!i)return this.getSimplifiedGeometry(e);const r=this.clone();return r.applyTransform(i),r.getSimplifiedGeometry(e)})}simplifyTransformed(t,e){return this.simplifyTransformedInternal(this.getRevision(),t,e)}clone(){return m()}closestPointXY(t,e,i,r){return m()}containsXY(t,e){const i=this.getClosestPoint([t,e]);return i[0]===t&&i[1]===e}getClosestPoint(t,e){return e=e||[NaN,NaN],this.closestPointXY(t[0],t[1],e,1/0),e}intersectsCoordinate(t){return this.containsXY(t[0],t[1])}computeExtent(t){return m()}getExtent(t){if(this.extentRevision_!=this.getRevision()){const e=this.computeExtent(this.extent_);(isNaN(e[0])||isNaN(e[1]))&&ct(e),this.extentRevision_=this.getRevision()}return mn(this.extent_,t)}rotate(t,e){m()}scale(t,e,i){m()}simplify(t){return this.getSimplifiedGeometry(t*t)}getSimplifiedGeometry(t){return m()}getType(){return m()}applyTransform(t){m()}intersectsExtent(t){return m()}translate(t,e){m()}transform(t,e){const i=E(t),r=i.getUnits()=="tile-pixels"?function(s,o,l){const a=i.getExtent(),h=i.getWorldExtent(),u=xt(h)/xt(a);return Sn(Ut,h[0],h[3],u,-u,0,0,0),Mn(s,0,s.length,l,Ut,o),Dt(i,e)(s,o,l)}:Dt(i,e);return this.applyTransform(r),this}}const ae=Tn;class bn extends ae{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates=null}computeExtent(t){return re(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}getCoordinates(){return m()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const e=this.getSimplifiedGeometryInternal(t);return e.getFlatCoordinates().length<this.flatCoordinates.length?e:(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)}getSimplifiedGeometryInternal(t){return this}getStride(){return this.stride}setFlatCoordinates(t,e){this.stride=Jt(t),this.layout=t,this.flatCoordinates=e}setCoordinates(t,e){m()}setLayout(t,e,i){let r;if(t)r=Jt(t);else{for(let s=0;s<i;++s){if(e.length===0){this.layout="XY",this.stride=2;return}e=e[0]}r=e.length,t=In(r)}this.layout=t,this.stride=r}applyTransform(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())}rotate(t,e){const i=this.getFlatCoordinates();if(i){const r=this.getStride();jn(i,0,i.length,r,t,e,i),this.changed()}}scale(t,e,i){e===void 0&&(e=t),i||(i=gt(this.getExtent()));const r=this.getFlatCoordinates();if(r){const s=this.getStride();Nn(r,0,r.length,s,t,e,i,r),this.changed()}}translate(t,e){const i=this.getFlatCoordinates();if(i){const r=this.getStride();An(i,0,i.length,r,t,e,i),this.changed()}}}function In(n){let t;return n==2?t="XY":n==3?t="XYZ":n==4&&(t="XYZM"),t}function Jt(n){let t;return n=="XY"?t=2:n=="XYZ"||n=="XYM"?t=3:n=="XYZM"&&(t=4),t}const O=bn;function Kt(n,t,e,i,r,s,o){const l=n[t],a=n[t+1],h=n[e]-l,u=n[e+1]-a;let c;if(h===0&&u===0)c=t;else{const g=((r-l)*h+(s-a)*u)/(h*h+u*u);if(g>1)c=e;else if(g>0){for(let f=0;f<i;++f)o[f]=ft(n[t+f],n[e+f],g);o.length=i;return}else c=t}for(let g=0;g<i;++g)o[g]=n[c+g];o.length=i}function mt(n,t,e,i,r){let s=n[t],o=n[t+1];for(t+=i;t<e;t+=i){const l=n[t],a=n[t+1],h=w(s,o,l,a);h>r&&(r=h),s=l,o=a}return r}function pt(n,t,e,i,r){for(let s=0,o=e.length;s<o;++s){const l=e[s];r=mt(n,t,l,i,r),t=l}return r}function Ln(n,t,e,i,r){for(let s=0,o=e.length;s<o;++s){const l=e[s];r=pt(n,t,l,i,r),t=l[l.length-1]}return r}function _t(n,t,e,i,r,s,o,l,a,h,u){if(t==e)return h;let c,g;if(r===0){if(g=w(o,l,n[t],n[t+1]),g<h){for(c=0;c<i;++c)a[c]=n[t+c];return a.length=i,g}return h}u=u||[NaN,NaN];let f=t+i;for(;f<e;)if(Kt(n,f-i,f,i,o,l,u),g=w(o,l,u[0],u[1]),g<h){for(h=g,c=0;c<i;++c)a[c]=u[c];a.length=i,f+=i}else f+=i*Math.max((Math.sqrt(g)-Math.sqrt(h))/r|0,1);if(s&&(Kt(n,e-i,t,i,o,l,u),g=w(o,l,u[0],u[1]),g<h)){for(h=g,c=0;c<i;++c)a[c]=u[c];a.length=i}return h}function Ct(n,t,e,i,r,s,o,l,a,h,u){u=u||[NaN,NaN];for(let c=0,g=e.length;c<g;++c){const f=e[c];h=_t(n,t,f,i,r,s,o,l,a,h,u),t=f}return h}function Xn(n,t,e,i,r,s,o,l,a,h,u){u=u||[NaN,NaN];for(let c=0,g=e.length;c<g;++c){const f=e[c];h=Ct(n,t,f,i,r,s,o,l,a,h,u),t=f[f.length-1]}return h}function Yn(n,t,e,i){for(let r=0,s=e.length;r<s;++r)n[t++]=e[r];return t}function q(n,t,e,i){for(let r=0,s=e.length;r<s;++r){const o=e[r];for(let l=0;l<i;++l)n[t++]=o[l]}return t}function Et(n,t,e,i,r){r=r||[];let s=0;for(let o=0,l=e.length;o<l;++o){const a=q(n,t,e[o],i);r[s++]=a,t=a}return r.length=s,r}function xn(n,t,e,i,r){r=r||[];let s=0;for(let o=0,l=e.length;o<l;++o){const a=Et(n,t,e[o],i,r[s]);a.length===0&&(a[0]=t),r[s++]=a,t=a[a.length-1]}return r.length=s,r}function Pt(n,t,e,i,r,s,o){const l=(e-t)/i;if(l<3){for(;t<e;t+=i)s[o++]=n[t],s[o++]=n[t+1];return o}const a=new Array(l);a[0]=1,a[l-1]=1;const h=[t,e-i];let u=0;for(;h.length>0;){const c=h.pop(),g=h.pop();let f=0;const d=n[g],y=n[g+1],p=n[c],P=n[c+1];for(let C=g+i;C<c;C+=i){const et=n[C],A=n[C+1],St=_n(et,A,d,y,p,P);St>f&&(u=C,f=St)}f>r&&(a[(u-t)/i]=1,g+i<u&&h.push(g,u),u+i<c&&h.push(u,c))}for(let c=0;c<l;++c)a[c]&&(s[o++]=n[t+c*i],s[o++]=n[t+c*i+1]);return o}function $n(n,t,e,i,r,s,o,l){for(let a=0,h=e.length;a<h;++a){const u=e[a];o=Pt(n,t,u,i,r,s,o),l.push(o),t=u}return o}function M(n,t){return t*Math.round(n/t)}function Dn(n,t,e,i,r,s,o){if(t==e)return o;let l=M(n[t],r),a=M(n[t+1],r);t+=i,s[o++]=l,s[o++]=a;let h,u;do if(h=M(n[t],r),u=M(n[t+1],r),t+=i,t==e)return s[o++]=h,s[o++]=u,o;while(h==l&&u==a);for(;t<e;){const c=M(n[t],r),g=M(n[t+1],r);if(t+=i,c==h&&g==u)continue;const f=h-l,d=u-a,y=c-l,p=g-a;if(f*p==d*y&&(f<0&&y<f||f==y||f>0&&y>f)&&(d<0&&p<d||d==p||d>0&&p>d)){h=c,u=g;continue}s[o++]=h,s[o++]=u,l=h,a=u,h=c,u=g}return s[o++]=h,s[o++]=u,o}function he(n,t,e,i,r,s,o,l){for(let a=0,h=e.length;a<h;++a){const u=e[a];o=Dn(n,t,u,i,r,s,o),l.push(o),t=u}return o}function Un(n,t,e,i,r,s,o,l){for(let a=0,h=e.length;a<h;++a){const u=e[a],c=[];o=he(n,t,u,i,r,s,o,c),l.push(c),t=u[u.length-1]}return o}function ue(n,t,e,i,r){let s;for(t+=i;t<e;t+=i)if(s=r(n.slice(t-i,t),n.slice(t,t+i)),s)return s;return!1}function z(n,t,e,i,r){r=r!==void 0?r:[];let s=0;for(let o=t;o<e;o+=i)r[s++]=n.slice(o,o+i);return r.length=s,r}function vt(n,t,e,i,r){r=r!==void 0?r:[];let s=0;for(let o=0,l=e.length;o<l;++o){const a=e[o];r[s++]=z(n,t,a,i,r[s]),t=a}return r.length=s,r}function Jn(n,t,e,i,r){r=r!==void 0?r:[];let s=0;for(let o=0,l=e.length;o<l;++o){const a=e[o];r[s++]=a.length===1&&a[0]===t?[]:vt(n,t,a,i,r[s]),t=a[a.length-1]}return r.length=s,r}function ce(n,t,e,i,r,s,o){let l,a;const h=(e-t)/i;if(h===1)l=t;else if(h===2)l=t,a=r;else if(h!==0){let u=n[t],c=n[t+1],g=0;const f=[0];for(let p=t+i;p<e;p+=i){const P=n[p],C=n[p+1];g+=Math.sqrt((P-u)*(P-u)+(C-c)*(C-c)),f.push(g),u=P,c=C}const d=r*g,y=Le(f,d);y<0?(a=(d-f[-y-2])/(f[-y-1]-f[-y-2]),l=t+(-y-2)*i):l=t+y*i}o=o>1?o:2,s=s||new Array(o);for(let u=0;u<o;++u)s[u]=l===void 0?NaN:a===void 0?n[l+u]:ft(n[l+u],n[l+i+u],a);return s}function rt(n,t,e,i,r,s){if(e==t)return null;let o;if(r<n[t+i-1])return s?(o=n.slice(t,t+i),o[i-1]=r,o):null;if(n[e-1]<r)return s?(o=n.slice(e-i,e),o[i-1]=r,o):null;if(r==n[t+i-1])return n.slice(t,t+i);let l=t/i,a=e/i;for(;l<a;){const g=l+a>>1;r<n[(g+1)*i-1]?a=g:l=g+1}const h=n[l*i-1];if(r==h)return n.slice((l-1)*i,(l-1)*i+i);const u=n[(l+1)*i-1],c=(r-h)/(u-h);o=[];for(let g=0;g<i-1;++g)o.push(ft(n[(l-1)*i+g],n[l*i+g],c));return o.push(r),o}function Kn(n,t,e,i,r,s,o){if(o)return rt(n,t,e[e.length-1],i,r,s);let l;if(r<n[i-1])return s?(l=n.slice(0,i),l[i-1]=r,l):null;if(n[n.length-1]<r)return s?(l=n.slice(n.length-i),l[i-1]=r,l):null;for(let a=0,h=e.length;a<h;++a){const u=e[a];if(t!=u){if(r<n[t+i-1])return null;if(r<=n[u-1])return rt(n,t,u,i,r,!1);t=u}}return null}function Wn(n,t,e,i,r){return!un(r,function(o){return!R(n,t,e,i,o[0],o[1])})}function R(n,t,e,i,r,s){let o=0,l=n[e-i],a=n[e-i+1];for(;t<e;t+=i){const h=n[t],u=n[t+1];a<=s?u>s&&(h-l)*(s-a)-(r-l)*(u-a)>0&&o++:u<=s&&(h-l)*(s-a)-(r-l)*(u-a)<0&&o--,l=h,a=u}return o!==0}function Gt(n,t,e,i,r,s){if(e.length===0||!R(n,t,e[0],i,r,s))return!1;for(let o=1,l=e.length;o<l;++o)if(R(n,e[o-1],e[o],i,r,s))return!1;return!0}function Bn(n,t,e,i,r,s){if(e.length===0)return!1;for(let o=0,l=e.length;o<l;++o){const a=e[o];if(Gt(n,t,a,i,r,s))return!0;t=a[a.length-1]}return!1}function Q(n,t,e,i,r){const s=se(ut(),n,t,e,i);return yn(r,s)?on(r,s)||s[0]>=r[0]&&s[2]<=r[2]||s[1]>=r[1]&&s[3]<=r[3]?!0:ue(n,t,e,i,function(o,l){return pn(r,o,l)}):!1}function Hn(n,t,e,i,r){for(let s=0,o=e.length;s<o;++s){if(Q(n,t,e[s],i,r))return!0;t=e[s]}return!1}function kn(n,t,e,i,r){return!!(Q(n,t,e,i,r)||R(n,t,e,i,r[0],r[1])||R(n,t,e,i,r[0],r[3])||R(n,t,e,i,r[2],r[1])||R(n,t,e,i,r[2],r[3]))}function ge(n,t,e,i,r){if(!kn(n,t,e[0],i,r))return!1;if(e.length===1)return!0;for(let s=1,o=e.length;s<o;++s)if(Wn(n,e[s-1],e[s],i,r)&&!Q(n,e[s-1],e[s],i,r))return!1;return!0}function Vn(n,t,e,i,r){for(let s=0,o=e.length;s<o;++s){const l=e[s];if(ge(n,t,l,i,r))return!0;t=l[l.length-1]}return!1}function Zn(n,t,e,i){let r=n[t],s=n[t+1],o=0;for(let l=t+i;l<e;l+=i){const a=n[l],h=n[l+1];o+=Math.sqrt((a-r)*(a-r)+(h-s)*(h-s)),r=a,s=h}return o}class U extends O{constructor(t,e){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,e!==void 0&&!Array.isArray(t[0])?this.setFlatCoordinates(e,t):this.setCoordinates(t,e)}appendCoordinate(t){this.flatCoordinates?v(this.flatCoordinates,t):this.flatCoordinates=t.slice(),this.changed()}clone(){const t=new U(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,e,i,r){return r<F(this.getExtent(),t,e)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(mt(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),_t(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,t,e,i,r))}forEachSegment(t){return ue(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}getCoordinateAtM(t,e){return this.layout!="XYM"&&this.layout!="XYZM"?null:(e=e!==void 0?e:!1,rt(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e))}getCoordinates(){return z(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(t,e){return ce(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,this.stride)}getLength(){return Zn(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(t){const e=[];return e.length=Pt(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,0),new U(e,"XY")}getType(){return"LineString"}intersectsExtent(t){return Q(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=q(this.flatCoordinates,0,t,this.stride),this.changed()}}const J=U;function fe(n,t,e,i){let r=0,s=n[e-i],o=n[e-i+1];for(;t<e;t+=i){const l=n[t],a=n[t+1];r+=o*l-s*a,s=l,o=a}return r/2}function de(n,t,e,i){let r=0;for(let s=0,o=e.length;s<o;++s){const l=e[s];r+=fe(n,t,l,i),t=l}return r}function qn(n,t,e,i){let r=0;for(let s=0,o=e.length;s<o;++s){const l=e[s];r+=de(n,t,l,i),t=l[l.length-1]}return r}class K extends O{constructor(t,e){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,e!==void 0&&!Array.isArray(t[0])?this.setFlatCoordinates(e,t):this.setCoordinates(t,e)}clone(){return new K(this.flatCoordinates.slice(),this.layout)}closestPointXY(t,e,i,r){return r<F(this.getExtent(),t,e)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(mt(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),_t(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,t,e,i,r))}getArea(){return fe(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return z(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(t){const e=[];return e.length=Pt(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,0),new K(e,"XY")}getType(){return"LinearRing"}intersectsExtent(t){return!1}setCoordinates(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=q(this.flatCoordinates,0,t,this.stride),this.changed()}}const Wt=K;class W extends O{constructor(t,e,i){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(t[0]))this.setCoordinates(t,e);else if(e!==void 0&&i)this.setFlatCoordinates(e,t),this.ends_=i;else{let r=this.getLayout();const s=t,o=[],l=[];for(let a=0,h=s.length;a<h;++a){const u=s[a];a===0&&(r=u.getLayout()),v(o,u.getFlatCoordinates()),l.push(o.length)}this.setFlatCoordinates(r,o),this.ends_=l}}appendLineString(t){this.flatCoordinates?v(this.flatCoordinates,t.getFlatCoordinates().slice()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const t=new W(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t}closestPointXY(t,e,i,r){return r<F(this.getExtent(),t,e)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(pt(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Ct(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,t,e,i,r))}getCoordinateAtM(t,e,i){return this.layout!="XYM"&&this.layout!="XYZM"||this.flatCoordinates.length===0?null:(e=e!==void 0?e:!1,i=i!==void 0?i:!1,Kn(this.flatCoordinates,0,this.ends_,this.stride,t,e,i))}getCoordinates(){return vt(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(t){return t<0||this.ends_.length<=t?null:new J(this.flatCoordinates.slice(t===0?0:this.ends_[t-1],this.ends_[t]),this.layout)}getLineStrings(){const t=this.flatCoordinates,e=this.ends_,i=this.layout,r=[];let s=0;for(let o=0,l=e.length;o<l;++o){const a=e[o],h=new J(t.slice(s,a),i);r.push(h),s=a}return r}getFlatMidpoints(){const t=[],e=this.flatCoordinates;let i=0;const r=this.ends_,s=this.stride;for(let o=0,l=r.length;o<l;++o){const a=r[o],h=ce(e,i,a,s,.5);v(t,h),i=a}return t}getSimplifiedGeometryInternal(t){const e=[],i=[];return e.length=$n(this.flatCoordinates,0,this.ends_,this.stride,t,e,0,i),new W(e,"XY",i)}getType(){return"MultiLineString"}intersectsExtent(t){return Hn(this.flatCoordinates,0,this.ends_,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);const i=Et(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=i.length===0?0:i[i.length-1],this.changed()}}const ye=W;class Rt extends O{constructor(t,e){super(),this.setCoordinates(t,e)}clone(){const t=new Rt(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,e,i,r){const s=this.flatCoordinates,o=w(t,e,s[0],s[1]);if(o<r){const l=this.stride;for(let a=0;a<l;++a)i[a]=s[a];return i.length=l,o}return r}getCoordinates(){return this.flatCoordinates?this.flatCoordinates.slice():[]}computeExtent(t){return ln(this.flatCoordinates,t)}getType(){return"Point"}intersectsExtent(t){return ne(t,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(t,e){this.setLayout(e,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Yn(this.flatCoordinates,0,t,this.stride),this.changed()}}const I=Rt;class wt extends O{constructor(t,e){super(),e&&!Array.isArray(t[0])?this.setFlatCoordinates(e,t):this.setCoordinates(t,e)}appendPoint(t){this.flatCoordinates?v(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.changed()}clone(){const t=new wt(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,e,i,r){if(r<F(this.getExtent(),t,e))return r;const s=this.flatCoordinates,o=this.stride;for(let l=0,a=s.length;l<a;l+=o){const h=w(t,e,s[l],s[l+1]);if(h<r){r=h;for(let u=0;u<o;++u)i[u]=s[l+u];i.length=o}}return r}getCoordinates(){return z(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(t){const e=this.flatCoordinates?this.flatCoordinates.length/this.stride:0;return t<0||e<=t?null:new I(this.flatCoordinates.slice(t*this.stride,(t+1)*this.stride),this.layout)}getPoints(){const t=this.flatCoordinates,e=this.layout,i=this.stride,r=[];for(let s=0,o=t.length;s<o;s+=i){const l=new I(t.slice(s,s+i),e);r.push(l)}return r}getType(){return"MultiPoint"}intersectsExtent(t){const e=this.flatCoordinates,i=this.stride;for(let r=0,s=e.length;r<s;r+=i){const o=e[r],l=e[r+1];if(ne(t,o,l))return!0}return!1}setCoordinates(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=q(this.flatCoordinates,0,t,this.stride),this.changed()}}const Ft=wt;function me(n,t,e,i,r,s,o){let l,a,h,u,c,g,f;const d=r[s+1],y=[];for(let C=0,et=e.length;C<et;++C){const A=e[C];for(u=n[A-i],g=n[A-i+1],l=t;l<A;l+=i)c=n[l],f=n[l+1],(d<=g&&f<=d||g<=d&&d<=f)&&(h=(d-g)/(f-g)*(c-u)+u,y.push(h)),u=c,g=f}let p=NaN,P=-1/0;for(y.sort(Zt),u=y[0],l=1,a=y.length;l<a;++l){c=y[l];const C=Math.abs(c-u);C>P&&(h=(u+c)/2,Gt(n,t,e,i,h,d)&&(p=h,P=C)),u=c}return isNaN(p)&&(p=r[s]),o?(o.push(p,d,P),o):[p,d,P]}function zn(n,t,e,i,r){let s=[];for(let o=0,l=e.length;o<l;++o){const a=e[o];s=me(n,t,a,i,r,2*o,s),t=a[a.length-1]}return s}function Qn(n,t,e,i){for(;t<e-i;){for(let r=0;r<i;++r){const s=n[t+r];n[t+r]=n[e-i+r],n[e-i+r]=s}t+=i,e-=i}}function pe(n,t,e,i){let r=0,s=n[e-i],o=n[e-i+1];for(;t<e;t+=i){const l=n[t],a=n[t+1];r+=(l-s)*(a+o),s=l,o=a}return r===0?void 0:r>0}function _e(n,t,e,i,r){r=r!==void 0?r:!1;for(let s=0,o=e.length;s<o;++s){const l=e[s],a=pe(n,t,l,i);if(s===0){if(r&&a||!r&&!a)return!1}else if(r&&!a||!r&&a)return!1;t=l}return!0}function ti(n,t,e,i,r){for(let s=0,o=e.length;s<o;++s){const l=e[s];if(!_e(n,t,l,i,r))return!1;l.length&&(t=l[l.length-1])}return!0}function st(n,t,e,i,r){r=r!==void 0?r:!1;for(let s=0,o=e.length;s<o;++s){const l=e[s],a=pe(n,t,l,i);(s===0?r&&a||!r&&!a:r&&!a||!r&&a)&&Qn(n,t,l,i),t=l}return t}function Bt(n,t,e,i,r){for(let s=0,o=e.length;s<o;++s)t=st(n,t,e[s],i,r);return t}class B extends O{constructor(t,e,i){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,e!==void 0&&i?(this.setFlatCoordinates(e,t),this.ends_=i):this.setCoordinates(t,e)}appendLinearRing(t){this.flatCoordinates?v(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const t=new B(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t}closestPointXY(t,e,i,r){return r<F(this.getExtent(),t,e)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(pt(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Ct(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,t,e,i,r))}containsXY(t,e){return Gt(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,e)}getArea(){return de(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(t){let e;return t!==void 0?(e=this.getOrientedFlatCoordinates().slice(),st(e,0,this.ends_,this.stride,t)):e=this.flatCoordinates,vt(e,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const t=gt(this.getExtent());this.flatInteriorPoint_=me(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new I(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(t){return t<0||this.ends_.length<=t?null:new Wt(this.flatCoordinates.slice(t===0?0:this.ends_[t-1],this.ends_[t]),this.layout)}getLinearRings(){const t=this.layout,e=this.flatCoordinates,i=this.ends_,r=[];let s=0;for(let o=0,l=i.length;o<l;++o){const a=i[o],h=new Wt(e.slice(s,a),t);r.push(h),s=a}return r}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const t=this.flatCoordinates;_e(t,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=st(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(t){const e=[],i=[];return e.length=he(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(t),e,0,i),new B(e,"XY",i)}getType(){return"Polygon"}intersectsExtent(t){return ge(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);const i=Et(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=i.length===0?0:i[i.length-1],this.changed()}}const H=B;function ei(n,t,e,i){const r=[];let s=ut();for(let o=0,l=e.length;o<l;++o){const a=e[o];s=re(n,t,a[0],i),r.push((s[0]+s[2])/2,(s[1]+s[3])/2),t=a[a.length-1]}return r}class k extends O{constructor(t,e,i){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!i&&!Array.isArray(t[0])){let r=this.getLayout();const s=t,o=[],l=[];for(let a=0,h=s.length;a<h;++a){const u=s[a];a===0&&(r=u.getLayout());const c=o.length,g=u.getEnds();for(let f=0,d=g.length;f<d;++f)g[f]+=c;v(o,u.getFlatCoordinates()),l.push(g)}e=r,t=o,i=l}e!==void 0&&i?(this.setFlatCoordinates(e,t),this.endss_=i):this.setCoordinates(t,e)}appendPolygon(t){let e;if(!this.flatCoordinates)this.flatCoordinates=t.getFlatCoordinates().slice(),e=t.getEnds().slice(),this.endss_.push();else{const i=this.flatCoordinates.length;v(this.flatCoordinates,t.getFlatCoordinates()),e=t.getEnds().slice();for(let r=0,s=e.length;r<s;++r)e[r]+=i}this.endss_.push(e),this.changed()}clone(){const t=this.endss_.length,e=new Array(t);for(let r=0;r<t;++r)e[r]=this.endss_[r].slice();const i=new k(this.flatCoordinates.slice(),this.layout,e);return i.applyProperties(this),i}closestPointXY(t,e,i,r){return r<F(this.getExtent(),t,e)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Ln(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Xn(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,t,e,i,r))}containsXY(t,e){return Bn(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t,e)}getArea(){return qn(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(t){let e;return t!==void 0?(e=this.getOrientedFlatCoordinates().slice(),Bt(e,0,this.endss_,this.stride,t)):e=this.flatCoordinates,Jn(e,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){const t=ei(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=zn(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new Ft(this.getFlatInteriorPoints().slice(),"XYM")}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const t=this.flatCoordinates;ti(t,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=Bt(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(t){const e=[],i=[];return e.length=Un(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(t),e,0,i),new k(e,"XY",i)}getPolygon(t){if(t<0||this.endss_.length<=t)return null;let e;if(t===0)e=0;else{const s=this.endss_[t-1];e=s[s.length-1]}const i=this.endss_[t].slice(),r=i[i.length-1];if(e!==0)for(let s=0,o=i.length;s<o;++s)i[s]-=e;return new H(this.flatCoordinates.slice(e,r),this.layout,i)}getPolygons(){const t=this.layout,e=this.flatCoordinates,i=this.endss_,r=[];let s=0;for(let o=0,l=i.length;o<l;++o){const a=i[o].slice(),h=a[a.length-1];if(s!==0)for(let c=0,g=a.length;c<g;++c)a[c]-=s;const u=new H(e.slice(s,h),t,a);r.push(u),s=h}return r}getType(){return"MultiPolygon"}intersectsExtent(t){return Vn(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,3),this.flatCoordinates||(this.flatCoordinates=[]);const i=xn(this.flatCoordinates,0,t,this.stride,this.endss_);if(i.length===0)this.flatCoordinates.length=0;else{const r=i[i.length-1];this.flatCoordinates.length=r.length===0?0:r[r.length-1]}this.changed()}}const Ce=k;class V extends ae{constructor(t){super(),this.geometries_=t||null,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach($),this.changeEventsKeys_.length=0}listenGeometriesChange_(){if(this.geometries_)for(let t=0,e=this.geometries_.length;t<e;++t)this.changeEventsKeys_.push(b(this.geometries_[t],at.CHANGE,this.changed,this))}clone(){const t=new V(null);return t.setGeometries(this.geometries_),t.applyProperties(this),t}closestPointXY(t,e,i,r){if(r<F(this.getExtent(),t,e))return r;const s=this.geometries_;for(let o=0,l=s.length;o<l;++o)r=s[o].closestPointXY(t,e,i,r);return r}containsXY(t,e){const i=this.geometries_;for(let r=0,s=i.length;r<s;++r)if(i[r].containsXY(t,e))return!0;return!1}computeExtent(t){ct(t);const e=this.geometries_;for(let i=0,r=e.length;i<r;++i)an(t,e[i].getExtent());return t}getGeometries(){return Ht(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let t=[];const e=this.geometries_;for(let i=0,r=e.length;i<r;++i)e[i].getType()===this.getType()?t=t.concat(e[i].getGeometriesArrayRecursive()):t.push(e[i]);return t}getSimplifiedGeometry(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&t<this.simplifiedGeometryMaxMinSquaredTolerance)return this;const e=[],i=this.geometries_;let r=!1;for(let s=0,o=i.length;s<o;++s){const l=i[s],a=l.getSimplifiedGeometry(t);e.push(a),a!==l&&(r=!0)}if(r){const s=new V(null);return s.setGeometriesArray(e),s}return this.simplifiedGeometryMaxMinSquaredTolerance=t,this}getType(){return"GeometryCollection"}intersectsExtent(t){const e=this.geometries_;for(let i=0,r=e.length;i<r;++i)if(e[i].intersectsExtent(t))return!0;return!1}isEmpty(){return this.geometries_.length===0}rotate(t,e){const i=this.geometries_;for(let r=0,s=i.length;r<s;++r)i[r].rotate(t,e);this.changed()}scale(t,e,i){i||(i=gt(this.getExtent()));const r=this.geometries_;for(let s=0,o=r.length;s<o;++s)r[s].scale(t,e,i);this.changed()}setGeometries(t){this.setGeometriesArray(Ht(t))}setGeometriesArray(t){this.unlistenGeometriesChange_(),this.geometries_=t,this.listenGeometriesChange_(),this.changed()}applyTransform(t){const e=this.geometries_;for(let i=0,r=e.length;i<r;++i)e[i].applyTransform(t);this.changed()}translate(t,e){const i=this.geometries_;for(let r=0,s=i.length;r<s;++r)i[r].translate(t,e);this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}}function Ht(n){const t=[];for(let e=0,i=n.length;e<i;++e)t.push(n[e].clone());return t}const ni=V;class ii extends le{constructor(t){t=t||{},super(),this.dataProjection=E(t.dataProjection?t.dataProjection:"EPSG:4326"),t.featureProjection&&(this.defaultFeatureProjection=E(t.featureProjection)),this.geometryName_=t.geometryName,this.extractGeometryName_=t.extractGeometryName,this.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"]}readFeatureFromObject(t,e){let i=null;t.type==="Feature"?i=t:i={type:"Feature",geometry:t,properties:null};const r=ot(i.geometry,e),s=new te;return this.geometryName_?s.setGeometryName(this.geometryName_):this.extractGeometryName_&&"geometry_name"in i!==void 0&&s.setGeometryName(i.geometry_name),s.setGeometry(r),"id"in i&&s.setId(i.id),i.properties&&s.setProperties(i.properties,!0),s}readFeaturesFromObject(t,e){const i=t;let r=null;if(i.type==="FeatureCollection"){const s=t;r=[];const o=s.features;for(let l=0,a=o.length;l<a;++l)r.push(this.readFeatureFromObject(o[l],e))}else r=[this.readFeatureFromObject(t,e)];return r}readGeometryFromObject(t,e){return ot(t,e)}readProjectionFromObject(t){const e=t.crs;let i;if(e)if(e.type=="name")i=E(e.properties.name);else if(e.type==="EPSG")i=E("EPSG:"+e.properties.code);else throw new Error("Unknown SRS type");else i=this.dataProjection;return i}writeFeatureObject(t,e){e=this.adaptOptions(e);const i={type:"Feature",geometry:null,properties:null},r=t.getId();if(r!==void 0&&(i.id=r),!t.hasProperties())return i;const s=t.getProperties(),o=t.getGeometry();return o&&(i.geometry=lt(o,e),delete s[t.getGeometryName()]),zt(s)||(i.properties=s),i}writeFeaturesObject(t,e){e=this.adaptOptions(e);const i=[];for(let r=0,s=t.length;r<s;++r)i.push(this.writeFeatureObject(t[r],e));return{type:"FeatureCollection",features:i}}writeGeometryObject(t,e){return lt(t,this.adaptOptions(e))}}function ot(n,t){if(!n)return null;let e;switch(n.type){case"Point":{e=si(n);break}case"LineString":{e=oi(n);break}case"Polygon":{e=ui(n);break}case"MultiPoint":{e=ai(n);break}case"MultiLineString":{e=li(n);break}case"MultiPolygon":{e=hi(n);break}case"GeometryCollection":{e=ri(n);break}default:throw new Error("Unsupported GeoJSON type: "+n.type)}return yt(e,!1,t)}function ri(n,t){const e=n.geometries.map(function(i){return ot(i,t)});return new ni(e)}function si(n){return new I(n.coordinates)}function oi(n){return new J(n.coordinates)}function li(n){return new ye(n.coordinates)}function ai(n){return new Ft(n.coordinates)}function hi(n){return new Ce(n.coordinates)}function ui(n){return new H(n.coordinates)}function lt(n,t){n=yt(n,!0,t);const e=n.getType();let i;switch(e){case"Point":{i=mi(n);break}case"LineString":{i=gi(n);break}case"Polygon":{i=pi(n,t);break}case"MultiPoint":{i=di(n);break}case"MultiLineString":{i=fi(n);break}case"MultiPolygon":{i=yi(n,t);break}case"GeometryCollection":{i=ci(n,t);break}case"Circle":{i={type:"GeometryCollection",geometries:[]};break}default:throw new Error("Unsupported geometry type: "+e)}return i}function ci(n,t){return t=Object.assign({},t),delete t.featureProjection,{type:"GeometryCollection",geometries:n.getGeometriesArray().map(function(i){return lt(i,t)})}}function gi(n,t){return{type:"LineString",coordinates:n.getCoordinates()}}function fi(n,t){return{type:"MultiLineString",coordinates:n.getCoordinates()}}function di(n,t){return{type:"MultiPoint",coordinates:n.getCoordinates()}}function yi(n,t){let e;return t&&(e=t.rightHanded),{type:"MultiPolygon",coordinates:n.getCoordinates(e)}}function mi(n,t){return{type:"Point",coordinates:n.getCoordinates()}}function pi(n,t){let e;return t&&(e=t.rightHanded),{type:"Polygon",coordinates:n.getCoordinates(e)}}const _i=ii;class Ci extends le{constructor(t){super(),t=t||{},this.layerName_=t.layerName,this.layers_=t.layers?t.layers:null,this.dataProjection=E(t.dataProjection?t.dataProjection:"EPSG:4326")}readFeaturesFromObject(t,e){if(t.type=="Topology"){const i=t;let r,s=null,o=null;i.transform&&(r=i.transform,s=r.scale,o=r.translate);const l=i.arcs;r&&Si(l,s,o);const a=[],h=i.objects,u=this.layerName_;let c;for(const g in h)this.layers_&&!this.layers_.includes(g)||(h[g].type==="GeometryCollection"?(c=h[g],a.push.apply(a,Oi(c,l,s,o,u,g,e))):(c=h[g],a.push(Ee(c,l,s,o,u,g,e))));return a}return[]}readProjectionFromObject(t){return this.dataProjection}}const Ei={Point:Pi,LineString:Gi,Polygon:wi,MultiPoint:vi,MultiLineString:Ri,MultiPolygon:Fi};function tt(n,t){const e=[];let i;for(let r=0,s=n.length;r<s;++r)if(i=n[r],r>0&&e.pop(),i>=0){const o=t[i];for(let l=0,a=o.length;l<a;++l)e.push(o[l].slice(0))}else{const o=t[~i];for(let l=o.length-1;l>=0;--l)e.push(o[l].slice(0))}return e}function Pi(n,t,e){const i=n.coordinates;return t&&e&&Ot(i,t,e),new I(i)}function vi(n,t,e){const i=n.coordinates;if(t&&e)for(let r=0,s=i.length;r<s;++r)Ot(i[r],t,e);return new Ft(i)}function Gi(n,t){const e=tt(n.arcs,t);return new J(e)}function Ri(n,t){const e=[];for(let i=0,r=n.arcs.length;i<r;++i)e[i]=tt(n.arcs[i],t);return new ye(e)}function wi(n,t){const e=[];for(let i=0,r=n.arcs.length;i<r;++i)e[i]=tt(n.arcs[i],t);return new H(e)}function Fi(n,t){const e=[];for(let i=0,r=n.arcs.length;i<r;++i){const s=n.arcs[i],o=[];for(let l=0,a=s.length;l<a;++l)o[l]=tt(s[l],t);e[i]=o}return new Ce(e)}function Oi(n,t,e,i,r,s,o){const l=n.geometries,a=[];for(let h=0,u=l.length;h<u;++h)a[h]=Ee(l[h],t,e,i,r,s,o);return a}function Ee(n,t,e,i,r,s,o){let l=null;const a=n.type;if(a){const c=Ei[a];a==="Point"||a==="MultiPoint"?l=c(n,e,i):l=c(n,t),l=yt(l,!1,o)}const h=new te({geometry:l});n.id!==void 0&&h.setId(n.id);let u=n.properties;return r&&(u||(u={}),u[r]=s),u&&h.setProperties(u,!0),h}function Si(n,t,e){for(let i=0,r=n.length;i<r;++i)Mi(n[i],t,e)}function Mi(n,t,e){let i=0,r=0;for(let s=0,o=n.length;s<o;++s){const l=n[s];i+=l[0],r+=l[1],l[0]=i,l[1]=r,Ot(l,t,e)}}function Ot(n,t,e){n[0]=n[0]*t[0]+e[0],n[1]=n[1]*t[1]+e[1]}const ji=Ci;function Yi(n){const t={type:"FeatureCollection",features:[]},e=i=>{try{t.features.push(...Pe(i.payload).features)}catch(r){console.log(r)}Object.values(i.children||{}).map(e)};return e(n),t}const Ni=new _i,Ai=new ji;function Pe(n){return Ni.writeFeaturesObject(Ai.readFeatures(n))}var Ti=(n=>(n.COUNTRY="country",n.PROVINCE="province",n.CITY="city",n.DISTRICT="district",n))(Ti||{});const bi=["country","province","city","district"];function Ii(n){const{adcode:t,center:e,centroid:i,level:r}=n;return{adcode:t,center:e,centroid:i,level:r}}function kt(n){return bi.indexOf(n)}function Li(n,t){return kt(n)>=kt(t)}function xi(n,t="district",e=!1){const i=e?Object.values(n.children):[n],r=Mt(i,o=>({...o,children:Object.values(o.children)})),s=Mt(r,o=>{const l=Pe(o.payload).features[0];return l.properties=Ii(l.properties),{code:l.properties.adcode,name:o.name,geojson:l,children:o.children}});return t!=="district"?Ne(s,o=>Li(t,o.geojson.properties.level)):s}export{Ti as A,bi as a,Yi as b,xi as d,Pe as t};
